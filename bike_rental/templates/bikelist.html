<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css" />
    <title>Bike Booking - Kathmandu Bike Rentals</title>
    <script>
      function redirectToHome() {
        var homeUrl = document
          .querySelector(".logo")
          .getAttribute("data-url");
        setTimeout(() => {
          window.location.href = homeUrl;
        }, 500);
      }
    </script>
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 0;
        background: #f5f5f5;
      }

       /* Header Styles */
    .header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 15px 5%;
      background-color: #ff6b00;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    }

    .logo {
      font-size: 24px;
      font-weight: bold;
      color: white;
      background-color: #ff6b00;
      border: none;
    }

    .logo2 {
      font-size: 24px;
      font-weight: bold;
      color: #ff6b00;
      background-color: #FBEBD9;
    }

    .language-currency {
      display: flex;
      align-items: center;
      gap: 15px;
    }

    .language-currency select {
      padding: 8px 12px;
      border: 1px solid rgba(255, 255, 255, 0.3);
      border-radius: 4px;
      background-color: rgba(255, 255, 255, 0.2);
      color: white;
    }

    .loginBtn {
      padding: 8px 20px;
      background-color: white;
      color: #ff6b00;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-weight: bold;
      transition: all 0.3s;
    }

    .loginBtn:hover {
      background-color: #ffe0cc;
      transform: translateY(-2px);
    }

    .user-icon {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      background-color: rgba(255, 255, 255, 0.3);
      display: flex;
      justify-content: center;
      align-items: center;
      cursor: pointer;
      color: white;
      transition: all 0.3s;
    }

    .user-icon:hover {
      background-color: rgba(255, 255, 255, 0.5);
    }

    /* Notification Button */
  .notification-btn {
    width: 36px;
    height: 36px;
    border-radius: 50%;
    background-color: rgba(255, 255, 255, 0.3);
    border: none;
    cursor: pointer;
    color: white;
    font-size: 18px;
    display: flex;
    justify-content: center;
    align-items: center;
    transition: all 0.3s;
    position: relative; /* For positioning the popup relative to this button */
  }

  .notification-btn:hover {
    background-color: rgba(255, 255, 255, 0.5);
  }

  /* Notification Popup Styles */
  .notification-overlay {
    display: none;
    position: absolute;
    top: 53px; /* Reduced offset to make it closer to the button */
    left: 76%; /* Center horizontally relative to the button */
    transform: translateX(-50%); /* Adjust to center the popup */
    background: #fff;
    border-radius: 8px;
    padding: 20px;
    width: 300px;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
    z-index: 1000;
    font-size: 14px;
    color: #333;
  }

  .notification-overlay.show {
    display: block;
  }

  .notification-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 15px;
  }

  .notification-header h4 {
    font-size: 16px;
    color: #ff6b00;
    font-weight: bold;
    margin: 0;
  }

  .notification-close {
    background: none;
    border: none;
    font-size: 20px;
    color: #ff6b00;
    cursor: pointer;
  }

  .notification-content p {
    margin-bottom: 10px;
  }

  .notification-content p strong {
    color: #ff6b00;
  }

      /* Hero Section */

/* Search Box */
.search-box {
  display: flex;
  justify-content: center;
  max-width: 800px;
  margin: 0 auto;
}

.search-container {
  display: flex;
  align-items: center;
  margin-top: 20px;
  background-color: #fff;
  border-radius: 50px;
  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
  overflow: hidden;
  width: 80%;
}

.search-item {
  flex: 1;
  padding: 15px 20px;
  position: relative;
}

.search-item select.form-input {
  border: none;
  outline: none;
  width: 100%;
  font-size: 16px;
  color: #333;
  background-color: transparent;
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
  cursor: pointer;
  padding-right: 30px;
}

.search-item select.form-input::-ms-expand {
  display: none;
}

.search-item::after {
  position: absolute;
  right: 20px;
  top: 50%;
  transform: translateY(-50%);
  font-size: 12px;
  color: #333;
  pointer-events: none;
}

.search-item input {
  border: none;
  outline: none;
  width: 100%;
  font-size: 16px;
  color: #333;
  background-color: transparent;
}

.search-item input::placeholder {
  color: #999;
}

.icon {
  margin-right: 10px;
  color: #999;
}

.divider {
  width: 1px;
  height: 30px;
  background-color: #ddd;
}

.search-btn {
  background-color: #ff6b00;
  color: #fff;
  border: none;
  padding: 15px;
  border-radius: 50%;
  cursor: pointer;
  font-size: 18px;
  margin: 5px;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 50px;
  height: 50px;
  transition: all 0.3s;
}

.search-btn:hover {
  background-color: #e65100;
  transform: translateY(-2px);
  box-shadow: 0 5px 10px rgba(255, 107, 0, 0.4);
}

/* Date Range Picker */
.date-range-box {
  padding: 0; /* Remove padding to align with other inputs */
  border: none; /* Remove border */
  border-radius: 0; /* Remove border-radius */
  background: transparent; /* Match the search-container background */
  color: #333; /* Match the color of other inputs */
  font-family: Arial;
  width: 100%; /* Ensure it takes full width of the search-item */
  cursor: pointer;
  font-weight: normal; /* Match the weight of other inputs */
}

.date-range-box:hover {
  border: none; /* Remove border on hover */
  background: transparent; /* Keep background transparent */
}

.date-range-box:focus {
  outline: none;
  box-shadow: none; /* Remove focus shadow */
}

.date-range-box::placeholder {
  color: #999; /* Match placeholder color with other inputs */
}

/* Orange Calendar Theme */
.flatpickr-calendar {
  --fp-primary-color: #ff6b00;
  --fp-primary-text-color: #fff;
}

.flatpickr-day.selected {
  background: #ff6b00;
  border-color: #ff6b00;
}

.flatpickr-day:hover {
  background: #ffd699;
}


      .header2 {
        margin-top: 100px;
        text-align: center;
        padding: 20px;
        /* background: #fff; */
        /* border-bottom: 1px solid #ddd; */
        color: #ff6b00;
        margin-bottom: 20px;
        font-size: 1.8rem;
    
      }

      .header2 h1 {
        color: #ff6b00;
        font-size: 24px;
        margin: 0;
      }

      .card-container {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(500px, 1fr));
        gap: 40px;
        text-align: center;
        padding: 20px;
        max-width: 800px;
        max-height: 600px;
        margin: 0 auto;
        /* margin-left: 100px; */
      }
      .bike-list{
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        gap: 20px;

      }
      .card {
        border-radius: 20px;
        overflow: hidden;
        box-shadow: 0 4px 15px rgba(255, 107, 0, 0.1);
        background: white;
        transition: transform 0.3s, box-shadow 0.3s, border-color 0.3s;
        border: 1px solid #ffe0cc;
        display: flex;
        width: 50%;
        justify-content: center;
        flex-direction: row;
        align-items: center;
      }

      .card:hover,
      .card:focus {
        transform: translateY(-5px);
        box-shadow: 0 10px 20px rgba(255, 107, 0, 0.2);
        border-color: #ff6b00;
      }

      .card img {
        width: 300px;
        height: 240px;
        object-fit: cover;
        transition: transform 0.5s;
      }

      .card:hover img {
        transform: scale(1.05);
      }

      .card-content {
        padding: 40px;
        flex: 1;
      }

      .card h3 {
        font-size: 18px;
        margin: 0 0 8px;
        color: #333;
      }

      .card p {
        margin: 0 0 8px;
        font-size: 14px;
        color: #666;
      }

      .price {
        font-weight: bold;
        color: #ff6b00;
        font-size: 15px;
      }

      .rating {
        color: #f1c40f;
      }

      .select-btn {
        background: #ff6b00;
        color: white;
        border: none;
        padding: 8px 12px;
        border-radius: 5px;
        cursor: pointer;
        font-size: 14px;
        transition: background 0.3s;
        width: 100%;
        margin-top: 10px;
      }

      .select-btn:hover {
        background: #e55f00;
      }

      @media (max-width: 600px) {
        .card-container {
          grid-template-columns: 1fr;
          gap: 15px;
          padding: 10px;
        }

        .card {
          flex-direction: column;
        }

        .card img {
          width: 100%;
          height: 180px;
        }

        .card h3 {
          font-size: 16px;
        }

        .card p {
          font-size: 12px;
        }

        .card-content {
          padding: 10px;
        }
      }
    </style>
  </head>
  <body>
     <!-- Header -->
  <header class="header">
    <button
      type="button"
      class="logo"
      data-url="{% url 'home' %}"
      onclick="redirectToHome()"
    >
      üö¥‚Äç‚ôÇÔ∏è Bikeeez
    </button>
<div class="language-currency">
  <button type="button" class="notification-btn" onclick="toggleNotificationPopup()">üîî</button>
  <button
    type="button"
    class="loginBtn"
    data-url="/logout"
    onclick="redirectToLogout()"
  >
    Logout
  </button>
  <a href="{% url 'profile' %}">
    <div class="user-icon">üë§</div>
</a>
</div>
</header>

<!-- Notification Popup -->
<div id="notification-popup" class="notification-overlay">
<div class="notification-popup">
  <div class="notification-header">
    <h4>Notifications</h4>
    <button class="notification-close" onclick="toggleNotificationPopup()">‚úï</button>
  </div>
  <div class="notification-content">
    <p><strong>üî• Just In:</strong> New bikes have hit the rack! Find your perfect ride and book it now!</p>
    <p><strong>Special Offer:</strong> Get 20% off if you rent from this website</p>
  </div>
</div>
</div>

<script>
function redirectToLogout() {
  var logoutUrl = document.querySelector(".loginBtn").getAttribute("data-url");
  setTimeout(() => {
    window.location.href = logoutUrl;
  }, 500);
}

function toggleNotificationPopup() {
  const popup = document.getElementById('notification-popup');
  popup.classList.toggle('show');
}

// Close popup when clicking outside
document.addEventListener("click", function (e) {
  const notificationBtn = document.querySelector(".notification-btn");
  const popup = document.getElementById('notification-popup');
  if (!notificationBtn.contains(e.target) && !popup.contains(e.target)) {
    popup.classList.remove('show');
  }
});
</script>


      <!-- Hero Section -->
  <form>
    <section class="hero">
      <div class="search-box">
        <div class="search-container">
          <div class="search-item">
            <select class="form-input" name="places" id="places">
              <option value="" disabled selected>Select places</option>
              <option value="thamel">Thamel</option>
              <option value="jhamsikhel">Jhamsikhel</option>
              <option value="boudha">Boudha</option>
              <option value="patan">Patan</option>
              <option value="bhaktapur">Bhaktapur</option>
              <option value="kirtipur">Kirtipur</option>
              <option value="gongabu">Gongabu</option>
            </select>
          </div>
          <div class="divider"></div>
          <div class="search-item">
            <input type="text" id="dateRange" class="date-range-box" placeholder="Select dates" />
          </div>
          <div class="divider"></div>
          <div class="search-item">
            <input type="number" placeholder="Number of bikes" min="1" />
          </div>
          <button class="search-btn">‚ûî</button>
        </div>
      </div>
    </section>
  </form>


    <div class="header2">
      <h1>Available Bikes</h1>
    </div>
    <div class="card-container" id="bike-list">
      <!-- Bikes will be dynamically inserted here -->
    </div>

    <div id="bike-list" class="bike-list">
      {% if filtered_bikes %}
        {% for bike in filtered_bikes %}
          <div class="card">
            <img src="{{ bike.image.url }}" alt="{{ bike.name }}" loading="lazy" />
            <div class="card-content">
              <h3>{{ bike.name }}</h3>
              <p><strong>Type:</strong> {{ bike.get_category_display }}</p>
              <p><strong>Location:</strong> {{ bike.location }}</p>
              <p class="price">Rs. {{ bike.daily_rate }}/day | Rs. {{ bike.weekly_rate }}/week</p>
              <p class="rating">‚≠ê {{ bike.rating|floatformat:1 }}</p>
              <button class="select-btn" data-bike-id="{{ bike.id }}">Select</button>
            </div>
          </div>
        {% endfor %}
      {% else %}
        <p>No bikes available for your selected location and quantity.</p>
      {% endif %}
    </div>
    <script>
      document.addEventListener('DOMContentLoaded', function () {
        document.querySelectorAll('.select-btn').forEach(function (button) {
          button.addEventListener('click', function () {
            const bikeId = this.getAttribute('data-bike-id');
            window.location.href = `/booking/${bikeId}/`;  // This must match your URL pattern name='Booking'
          });
        });
      });
    </script>
  </body>
</html>
